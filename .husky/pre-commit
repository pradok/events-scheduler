#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check for AI tool references in staged files (excluding hook files and docs/qa)
STAGED_FILES=$(git diff --cached --name-only | grep -v -E "^\.husky/|^docs/qa/" || true)
if [ -n "$STAGED_FILES" ]; then
  FORBIDDEN_REFS=$(echo "$STAGED_FILES" | xargs grep -l "Claude Code\|claude\.com/claude-code" 2>/dev/null || true)
  if [ -n "$FORBIDDEN_REFS" ]; then
    echo ""
    echo "‚ùå ERROR: Found AI tool reference in staged files:"
    echo "$FORBIDDEN_REFS"
    echo ""
    echo "Please remove any mentions of 'Claude Code' or 'claude.com/claude-code'"
    echo ""
    exit 1
  fi
fi

npx lint-staged
